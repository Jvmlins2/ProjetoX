#include <Arduino.h>
#include <LiquidCrystal_I2C.h>

LiquidCrystal_I2C lcd(0x27, 20, 4);

//******Variaveis importantes *****************************
uint8_t vida1 = 5;//Variavel inteira sem sinal, representando vida, com o valor de 5 
uint8_t vida2 = 5;
//****************************************************** *

void removeVida2();
void removeVida1();
void drawBars();

void setup() {
  lcd.init();        
  lcd.backlight();   
  drawBars(); // Desenha as duas barras completas
}

void loop() {
  // Para teste: Simula um evento a cada 2 segundos para cada barra
  static uint32_t tempoAnterior = millis();
  static bool turn = false;

//*****Condição(Eventos) para executar cada função*********
  if (millis() - tempoAnterior >= 1000/*Tempo apenas*/)//Se (condição, no caso intervalo de tempo)
  {                                   /*para teste  */
    tempoAnterior = millis(); //Atualisa tempo anterior

//****************Trecho principal*************************
    if (turn) //Se vez da barra 1
    {
      removeVida1(); //Chama função que diminui barra
    }
    else  //Se não é vez da barra 1
    {
      removeVida2(); //Diminui barra 2
    }
//*********************************************************
    turn = !turn; //Inverte vez
  }
}
//========Funçoes do outro codigo da animaçao do LCD===========
// ----------- Desenha as duas barras completas----------------
void drawBars() {
  // Barra 1 na linha 0, colunas 0–4
  for (uint8_t i = 0; i < vida1; i++) {
    lcd.setCursor(i, 0);
    lcd.write(255);
  }
  // Barra 2 na linha 0, colunas 14–19
  for (uint8_t i = 0; i < vida2; i++) {
    lcd.setCursor(15 + i, 0);
    lcd.write(255);
  }
}
//==============================================================

//*****************Principais Funções**************************
// ————— Remove um bloco da Barra 1 —————
void removeVida1() {
  if (vida1 == 0) //Se vida é zero, não faz nada 
  {
    return;
  }
  lcd.setCursor(vida1 - 1, 0); //Posiciona cursor de acordo com valor da vida 1
  lcd.print(' '); //Apaga ponto de vida printando espaço vazio
  vida1--; //Valor de vida reduz 1       
}

// ————— Remove um bloco da Barra 2 —————
void removeVida2() {
  if (vida2 == 0)
  {
    return;
  }
  lcd.setCursor(21 - (vida2 + 1), 0);
  lcd.print(' ');
  vida2--;
}              
//*****************Principais Funções**************************
